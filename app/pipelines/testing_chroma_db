import os
import openai
from langchain.indexes import VectorstoreIndexCreator
from langchain_community.utilities import ApifyWrapper
from langchain_core.document_loaders.base import Document
from langchain_openai import OpenAI
from langchain_openai.embeddings import OpenAIEmbeddings
from langchain_openai.embeddings import OpenAIEmbeddings
from langchain.indexes.vectorstore import VectorstoreIndexCreator
# from langchain.llms import OpenAI
from transformers import GPT2TokenizerFast  # For token counting
from langchain_community.vectorstores import Chroma
from datetime import datetime, timezone
# import datetime


def chroma_db_testing():
    try:
        print(f"testing chroma sqlite3 ")
        embedding_function = OpenAIEmbeddings()

        chroma_folder = "./chroma_db_test"
        index = VectorstoreIndexCreator(
                vectorstore_cls=Chroma,  
                embedding=embedding_function,  
                vectorstore_kwargs={"persist_directory": chroma_folder}  
        )
    except Exception as e:
        print(f"Error occured while testing chromadb")